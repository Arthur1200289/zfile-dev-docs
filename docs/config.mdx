import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';

# 参数配置

:::caution
注意，所有配置修改后都需要重启 ZFile 才能生效。
:::

[//]: # (:::tip)

[//]: # (下文中 `${user.home}` 表示用户目录，Windows 下表示 `C:\Users\用户名`，Linux 中对于 root 用户，在 `/root/` 路径下，对于其他用户，在 `/home/用户名/` 路径下。)

[//]: # (:::)

## 配置文件路径

> 配置文件路径在左侧菜单栏 「快速安装」 相关部署文档中有介绍，点击下方链接可打开对应的文档：

<Tabs>
<TabItem value="os" label="开源版">

- [Linux](/install/os-linux#config)
- [Windows](/install/os-windows#config)
- [Docker](/install/os-docker)
- [宝塔](/install/os-baota#config)


</TabItem>
<TabItem value="pro" label="捐赠版">

- [Linux](/install/pro-linux#config)
- [Windows](/install/pro-windows#config)
- [Docker](/install/pro-docker)
- [宝塔](/install/pro-baota#config)

</TabItem>
</Tabs>


## 启动端口

```bash showLineNumbers
server.port=8080
```

## 数据库配置

### SQLite


:::tip
SQLite 为默认数据库，免安装，不修改默认路径的情况下，启动 ZFile 后默认创建，**修改后需手动创建数据库文件路径**（文件路径不是数据库文件）。

`${user.home}` 表示用户目录，Windows 下表示 `C:\Users\用户名`，Linux 中对于 root 用户，在 `/root/` 路径下，对于其他用户，在 `/home/用户名/` 路径下。
:::

```bash showLineNumbers
zfile.db.path=${user.home}/.zfile-v4/db/zfile
```

### MySQL

如需要使用 `MySQL`，可修改配置文件，参考下发（注释掉灰色高亮部分，启用下面的 MySQL 信息）：

<span class="text-gray-500 text-sm">提示：目前仅测试了 MySQL 5.7 及以上版本</span>

```properties showLineNumbers {1-3}
## sqlite
#spring.datasource.driver-class-name=org.sqlite.JDBC
#spring.datasource.url=jdbc:sqlite:${zfile.db.path}

## mysql
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.datasource.url=jdbc:mysql://127.0.0.1:3306/zfile?characterEncoding=utf8&serverTimezone=Asia/Shanghai&useSSL=false&allowPublicKeyRetrieval=true
spring.datasource.username=root
spring.datasource.password=password
```

## debug 模式 {#debug}

如忘记密码后，可开启 `debug` 模式，启用后在 `zfile` 首页点击重置密码按钮，或访问 `http(s)://ip:port/api/site/reset-password`，会将用户名强制重置为 `admin`，密码修改为 `123456`。

```properties showLineNumbers
zfile.debug=false
```